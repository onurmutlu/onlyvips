# 🌟 OnlyVips - Telegram Tabanlı Premium İçerik Platformu

OnlyVips, Telegram ekosistemi içinde çalışan, içerik üreticileri ve kullanıcıları bir araya getiren kapsamlı bir premium içerik platformudur. Star ekonomisi ve görev sistemi üzerine kurulu olan bu platform, içerik üreticilerine içeriklerini monetize etme, kullanıcılara ise kaliteli içeriklere erişim imkanı sağlar.

## 🏆 Vizyon ve Misyon

**Vizyon**: Telegram platformu üzerinde en kapsamlı ve kullanıcı dostu premium içerik ekosistemini oluşturmak.

**Misyon**: İçerik üreticilerine değerli içeriklerini monetize etmeleri için güvenli, şeffaf ve kullanımı kolay bir platform sağlarken, kullanıcılara kaliteli içeriğe erişim ve etkileşim imkanı sunmak.

## 🚀 Proje Bileşenleri

OnlyVips platformu dört ana bileşenden oluşmaktadır:

### 1. OnlyVips MiniApp (Kullanıcı Arayüzü)
- **Amaç**: Kullanıcılara içerik keşfetme ve tüketme imkanı sağlayan Telegram MiniApp
- **Teknolojiler**: React, TypeScript, UnoCSS, TON Connect 2.0
- **Özellikler**:
  - Premium içerik erişimi ve keşfi
  - Şovcu profil görüntüleme
  - XP ve rozet sistemi
  - Görev takibi ve tamamlama
  - VIP paket abonelik yönetimi
  - TON ödemeleri

### 2. Şovcu Panel (İçerik Üretici Arayüzü)
- **Amaç**: İçerik üreticileri için yönetim ve içerik yükleme platformu
- **Teknolojiler**: React, Vite, TailwindCSS, Chart.js
- **Özellikler**:
  - Çoklu medya türü içerik yükleme (fotoğraf, video, ses, metin)
  - VIP paket oluşturma ve yönetme
  - Abone ve gelir istatistikleri
  - İçerik performans analizi
  - TON cüzdan entegrasyonu

### 3. Flirt-Bot (Telegram Bot)
- **Amaç**: Görev doğrulama, kullanıcı etkileşimi ve yapay zeka asistanı
- **Teknolojiler**: Python, Telethon, OpenAI API
- **Özellikler**:
  - 8+ farklı görev tipini otomatik doğrulama
  - GPT destekli flört koçluğu
  - Kullanıcı XP ve rozet sistemi
  - MiniApp ve Backend API entegrasyonu
  - Maliyet optimizasyonlu GPT kullanımı

### 4. Backend API
- **Amaç**: Tüm bileşenleri birleştiren merkezi API hizmeti
- **Teknolojiler**: FastAPI, MongoDB, JWT, TON API
- **Özellikler**:
  - İçerik ve kullanıcı veritabanı yönetimi
  - Güvenli kimlik doğrulama
  - Ödeme işleme ve takibi
  - Görev ve XP sistemi yönetimi
  - Analitik ve raporlama altyapısı

## 📊 Mevcut Durum ve Başarılar

OnlyVips projesinin şu anki sürümü **v0.7.0** olup, üç ana geliştirme aşamasını tamamlamıştır:

- ✅ **Aşama 1: Temel Altyapı** (Kasım 2023) - Backend API, Telegram bot entegrasyonu, görev sistemi ve MiniApp iskeleti
- ✅ **Aşama 2: Akıllı Asistan** (Aralık 2023) - GPT entegrasyonu, flört koçluğu, görev doğrulama sistemi
- ✅ **Aşama 3: İçerik Ekosistemi** (Ocak 2024) - İçerik yönetimi, VIP paketler, analitik paneli, TON entegrasyonu

Güncel sürüm (0.7.0) kapsamında tamamlanan önemli özellikler:
- İçerik ekosistemi tüm bileşenleri ile tamamlandı
- TON ödeme sistemi tam entegrasyonu sağlandı
- Şovcu Panel için kapsamlı içerik yönetim araçları eklendi
- GPT kullanım limitleri ve optimizasyonları geliştirildi
- Tüm API'ler gerçek veritabanı bağlantıları ile çalışır hale getirildi

## 📋 İçerik Kategorileri ve Türleri

Platform aşağıdaki içerik kategorilerini ve türlerini desteklemektedir:

1. **Fotoğraf İçerikler**
   - Tek fotoğraf
   - Fotoğraf galerileri
   - Özel çekimler

2. **Video İçerikler**
   - Kısa videolar
   - Tam uzunlukta videolar
   - Video serileri

3. **Sesli İçerikler**
   - ASMR kayıtları
   - Sesli hikayeler
   - Konuşma kayıtları

4. **Yazılı İçerikler**
   - Hikayeler
   - Rehberler
   - Kişisel yazılar

5. **Özel İçerikler**
   - Kişiselleştirilmiş içerikler
   - İstek üzerine hazırlanan materyaller
   - Canlı yayınlar (geliştirme aşamasında)

## 💎 Ekonomi Modeli

OnlyVips platformu, çeşitli ödeme ve teşvik mekanizmaları kullanarak sürdürülebilir bir ekonomi oluşturur:

### Star Sistemi
- Platform içi dijital para birimi
- Görevler tamamlanarak kazanılabilir
- Premium içeriklere erişim için kullanılabilir
- TON ile satın alınabilir

### TON Blockchain Entegrasyonu
- Güvenli ve şeffaf ödemeler
- İçerik üreticilere ödeme
- VIP paket satın alma
- Star satın alma

### VIP Paket Abonelikleri
- Farklı süre ve fiyat seçenekleri (haftalık, aylık, yıllık)
- Özel içeriklere erişim
- Farklı avantaj paketleri
- Otomatik yenileme seçeneği

### Rozet ve XP Sistemi
- Görev tamamlama ile XP kazanımı
- Seviye atlama ve rozet kazanma
- Özel statüler ve ayrıcalıklar
- Topluluk içinde tanınırlık

## 🔐 Güvenlik ve Gizlilik

OnlyVips, kullanıcı verilerinin ve içeriklerin güvenliğini en üst düzeyde tutar:

- **Telegram kimlik doğrulama** ile güvenli giriş
- **JWT tabanlı** güvenli API iletişimi
- **Şifrelenmiş içerik depolama**
- **TON blockchain** ile güvenli ödemeler
- **Yaş doğrulama** mekanizmaları
- **İçerik üretici doğrulama** sistemi
- **GDPR uyumlu** veri koruma politikaları

## 🤖 Görev Sistemi

Platform, kullanıcıların etkileşimini artırmak için çeşitli görev tipleri sunar:

- **BotMentionTask**: Grup içinde botu etiketleme
- **ChannelJoinTask**: Belirtilen Telegram kanalına katılma
- **GroupJoinTask**: Belirtilen Telegram grubuna katılma
- **ForwardMessageTask**: Belirli bir mesajı yönlendirme
- **PostShareTask**: İçerik paylaşma
- **DeeplinkTrackTask**: Özel link paylaşma ve takibi
- **PinCheckTask**: Mesaj sabitleme görevi
- **MessageTask**: Belirli bir mesajı gönderme
- **ReferralTask**: Yeni kullanıcı davet etme
- **InviteTrackerTask**: Grup veya kanala kullanıcı davet etme
- **ShareCountTask**: Belirli sayıda paylaşım yapma

## 🛠️ Kurulum ve Geliştirme

### Sistem Gereksinimleri
- Node.js v16+
- Python 3.9+
- MongoDB
- Docker (dağıtım için önerilir)

### MiniApp Kurulumu
```bash
cd miniapp
npm install
cp .env.example .env
# .env dosyasını düzenleyin
npm run dev
```

### Şovcu Panel Kurulumu
```bash
cd showcu-panel
npm install
cp .env.example .env
# .env dosyasını düzenleyin
npm run dev
```

### Flirt-Bot Kurulumu
```bash
cd flirt-bot
pip install -r requirements.txt
cp .env.example .env
# .env dosyasını düzenleyin
python session_generator.py  # İsteğe bağlı
python bot_listener.py
```

### Backend API Kurulumu
```bash
cd backend-api
npm install
cp .env.example .env
# .env dosyasını düzenleyin
npm run dev
```

### Docker ile Dağıtım
```bash
# Backend API için
cd backend-api
docker build -t onlyvips-api .
docker run -p 5000:5000 -v ./uploads:/app/uploads onlyvips-api

# Frontend bileşenleri için
cd miniapp  # veya showcu-panel
npm run build
# Oluşturulan dist/ klasörünü statik bir sunucuya yükleyin
```

## 📱 Telegram Entegrasyonu

### Bot Kurulumu
1. Telegram'da @BotFather ile yeni bir bot oluşturun
2. Alınan token'ı `.env` dosyasındaki `BOT_TOKEN` değerine ekleyin
3. (İsteğe bağlı) Kullanıcı hesabı için `session_generator.py` çalıştırın
4. Botu başlatın ve `/start` komutu ile test edin

### MiniApp Yapılandırması
1. @BotFather'da botunuzu seçin ve `/newapp` komutunu kullanın
2. Web app URL'ini dağıtılan MiniApp adresine ayarlayın
3. MiniApp'in Telegram WebApp SDK'yı doğru şekilde kullandığından emin olun
4. Bot üzerinden `/miniapp` komutu ile MiniApp'e erişim sağlayın

## 🧪 Test Senaryoları

Projenin deployment'ı sonrasında şu senaryoları test edin:

### Kullanıcı Senaryoları
1. **Kayıt ve onboarding:** Bot'a `/start` komutu gönderme ve MiniApp'e erişim
2. **Görev tamamlama:** Farklı görev tiplerini tamamlama ve ödül alma
3. **İçerik keşfi:** MiniApp üzerinden içerik arama ve görüntüleme
4. **VIP abonelik:** TON ödemesi ile paket satın alma ve içeriklere erişim

### İçerik Üretici Senaryoları
1. **İçerik yükleme:** Şovcu Panel üzerinden farklı türlerde içerik yükleme
2. **Paket oluşturma:** Farklı fiyat ve süre seçenekleriyle VIP paket oluşturma
3. **İstatistik takibi:** Abone sayısı, görüntüleme ve gelir analizi inceleme
4. **Para çekme:** TON cüzdanına ödeme talebi oluşturma

### Teknik Testler
1. **Yük testi:** Eş zamanlı kullanıcılarla sistem performansı 
2. **API güvenliği:** Endpoint'lerin güvenlik ve hata yanıtlarının doğrulanması
3. **Ödeme döngüsü:** TON ödemelerinin doğru işlenmesi ve kaydedilmesi
4. **Görev doğrulama:** Bot'un tüm görev tiplerini doğru doğrulaması

## 🗺️ Gelecek Planları

OnlyVips platformunun gelecek planları şu şekildedir:

### Yakında (0.8.0 - Şubat 2024)
- TON cüzdanı tam entegrasyonu tamamlanacak
- Şovcu ödeme sistemi geliştirilecek
- Premium platform abonelik modeli eklenerek
- Reklam ve tanıtım araçları geliştirilecek

### Orta vadede (0.9.0 - 1.0.0)
- Yapay zeka destekli içerik önerileri
- Gelişmiş topluluk özellikleri
- Çoklu dil desteği
- Native mobil uygulamalar

### Uzun vadede (2024 sonu - 2025)
- NFT tabanlı içerik koleksiyonları
- Canlı yayın altyapısı
- İçerik üreticiler için AI araçları
- Genişletilmiş API ve geliştirici araçları
- Dağıtık depolama ve DAO yapısı

Daha detaylı gelecek planları için [ROADMAP.MD](ROADMAP.MD) belgesini inceleyebilirsiniz.

## 📈 Sürüm Geçmişi

- **0.7.0** (Ocak 2024): İçerik ekosistemi, TON entegrasyonu, Şovcu Panel
- **0.6.0** (Aralık 2023): TON Connect, VIP paketler, içerik vitrinleri
- **0.5.0** (Aralık 2023): TaskManager, rozet sistemi, GPT optimizasyonu
- **0.4.0** (Kasım 2023): MiniApp entegrasyonu, XP sistemi, API güvenliği
- **0.3.0** (Kasım 2023): GPT entegrasyonu, flört koçu, görev sistemi
- **0.2.0** (Kasım 2023): Temel görev yönetimi, bot komutları
- **0.1.0** (Kasım 2023): Proje temel altyapısı, veritabanı, MiniApp iskeleti

Tüm değişiklik detayları için [CHANGELOG.MD](CHANGELOG.MD) belgesini inceleyebilirsiniz.

## 📋 Deployment Kontrol Listesi

Projeyi canlı ortama almadan önce şu kontrolleri yapın:

### Veritabanı
- [ ] MongoDB Atlas veya özel sunucu yapılandırması tamamlandı
- [ ] Yedekleme stratejisi belirlendi
- [ ] Veritabanı şeması ve indeksler optimize edildi

### Backend API
- [ ] `.env` dosyası tüm gerekli değerlerle yapılandırıldı
- [ ] API endpoint'leri test edildi
- [ ] JWT secret ve diğer güvenlik anahtarları güvenceye alındı
- [ ] Rate limiting ve güvenlik duvarı yapılandırıldı
- [ ] HTTPS sertifikaları kuruldu

### MiniApp ve Şovcu Panel
- [ ] Build optimizasyonları yapıldı
- [ ] Statik dosyalar CDN üzerinden sunuluyor
- [ ] Responsive tasarım tüm cihazlarda test edildi
- [ ] API URL'leri canlı ortama ayarlandı
- [ ] Telegram WebApp entegrasyonu test edildi

### Flirt-Bot
- [ ] API kimlik bilgileri ayarlandı
- [ ] Session string (isteğe bağlı) yapılandırıldı
- [ ] Supervisor veya systemd servisi yapılandırıldı
- [ ] Log rotasyonu ve izleme ayarlandı
- [ ] Hata bildirim sistemi kuruldu

### Ödeme Sistemi
- [ ] TON cüzdan adresleri yapılandırıldı
- [ ] Test işlemleri gerçekleştirildi
- [ ] Otomatik ödeme onayı ve işleme sistemleri test edildi

## 🔗 Yararlı Bağlantılar

- [OnlyVips MiniApp](https://t.me/OnlyVipsBot/app) - Telegram MiniApp
- [OnlyVips Bot](https://t.me/OnlyVipsBot) - Telegram Bot
- [Şovcu Panel](https://panel.onlyvips.xyz) - İçerik Üretici Paneli
- [Değişim Günlüğü](CHANGELOG.MD) - Sürüm geçmişi
- [Yol Haritası](ROADMAP.MD) - Gelecek planları

## 📝 Lisans

© 2024 SiyahKare. Tüm hakları saklıdır.

---

**OnlyVips v0.7.0** - İçerik ekosistemi tamamlandı, TON ödemeleri entegre edildi.

*Bu belge, OnlyVips projesinin genel bakışını sağlamaktadır. Bileşen özelinde daha detaylı bilgiler için ilgili bileşenlerin README dosyalarını inceleyebilirsiniz.*

# OnlyVips Monorepo

OnlyVips, Telegram tabanlı bir premium içerik platformudur. Bu monorepo projesi, platform için gerekli tüm bileşenleri içerir.

## 📚 İçindekiler

- [Genel Bakış](#genel-bakış)
- [Proje Yapısı](#proje-yapısı)
- [Başlarken](#başlarken)
- [Geliştirme](#geliştirme)
- [Güvenli Secret Yönetimi](#güvenli-secret-yönetimi)
- [CI/CD](#cicd)
- [Lisans](#lisans)

## 🔍 Genel Bakış

OnlyVips, içerik üreticilerinin Telegram üzerinden premium içeriklerini paylaşabilmelerine olanak tanıyan bir platformdur. Proje aşağıdaki bileşenlerden oluşur:

- **MiniApp**: Telegram içi mini uygulama
- **Şovcu Panel**: İçerik üreticileri için yönetim paneli
- **Backend API**: RESTful API sunucusu
- **Flirt Bot**: Telegram bot entegrasyonu
- **Common Modules**: Paylaşılan TypeScript modülleri

## 📁 Proje Yapısı

```
OnlyVips/
├── miniapp/              # Telegram Mini App (React)
├── showcu-panel/         # İçerik üretici paneli (React)
├── backend-api/          # Backend API sunucusu (FastAPI)
├── flirt-bot/            # Telegram bot uygulaması (Python)
├── common-modules/       # Paylaşılan TypeScript modülleri
├── docker-config/        # Docker yapılandırması
├── .github/              # GitHub CI/CD workflow'ları
├── package.json          # Monorepo yapılandırması
└── pyproject.toml        # Python paket yapılandırması
```

## 🚀 Başlarken

### Gereksinimler

- Node.js 16+
- Python 3.9+
- Yarn
- Poetry

### Kurulum

1. Depoyu klonlayın:

```bash
git clone https://github.com/SiyahKare/OnlyVips.git
cd OnlyVips
```

2. Bağımlılıkları yükleyin:

```bash
# JavaScript bağımlılıkları
yarn install

# Python bağımlılıkları
poetry install
```

## 💻 Geliştirme

### Ortam değişkenlerini yapılandırma

Proje artık HashiCorp Vault, AWS SSM Parameter Store ve çevresel değişkenler olmak üzere üç farklı secret yönetim kaynağını desteklemektedir. Yerel geliştirme için şunları yapabilirsiniz:

1. `.env.example` dosyasını her alt projenin kök dizinine `.env` olarak kopyalayın
2. `.env` dosyalarını düzenleyerek gerekli değişkenleri ekleyin

### Bileşenleri Başlatma

```bash
# Backend API'yi başlat
yarn start:backend

# MiniApp'i başlat
yarn start:miniapp

# Şovcu Panel'i başlat
yarn start:panel

# Flirt Bot'u başlat
yarn start:bot
```

## 🔐 Güvenli Secret Yönetimi

OnlyVips, secret değerlerini güvenli bir şekilde yönetmek için artık aşağıdaki seçenekleri sunmaktadır:

### 1. HashiCorp Vault Entegrasyonu

HashiCorp Vault, secret değerlerini güvenli bir şekilde depolamak ve yönetmek için kullanılır.

#### Kurulum ve Yapılandırma

1. Vault sunucusunu kurun (üretimde örn. AWS, GCP veya kendi sunucunuzda çalıştırabilirsiniz)
2. Secret değerlerini Vault'a yükleyin:

```bash
# Vault'a giriş yap
vault login

# Secret engine'i etkinleştir (eğer etkin değilse)
vault secrets enable -path=secret kv-v2

# Secret değerlerini yükle
vault kv put secret/onlyvips \
    JWT_SECRET="secure-jwt-secret" \
    TELEGRAM_API_ID="your-api-id" \
    TELEGRAM_API_HASH="your-api-hash" \
    TELEGRAM_BOT_TOKEN="your-bot-token" \
    # ... diğer secretler ...
```

3. Backend ve bot yapılandırmasını güncelleyin:

```bash
# .env dosyasında
SECRET_PROVIDER=vault
VAULT_URL=https://your-vault-server:8200
VAULT_TOKEN=your-vault-token
VAULT_PATH=onlyvips  # Secret path
VAULT_MOUNT=secret   # Mount point
```

### 2. AWS SSM Parameter Store Entegrasyonu

AWS SSM Parameter Store, AWS ortamında güvenli bir şekilde secret değerlerini saklamak için idealdir.

#### Kurulum ve Yapılandırma

1. Secret değerlerini AWS SSM'ye ekleyin:

```bash
# AWS CLI ile parametre ekle
aws ssm put-parameter \
    --name "/onlyvips/JWT_SECRET" \
    --value "secure-jwt-secret" \
    --type "SecureString"

aws ssm put-parameter \
    --name "/onlyvips/TELEGRAM_API_ID" \
    --value "your-api-id" \
    --type "SecureString"
    
# ... diğer parametreler için tekrarlayın ...
```

2. Uygulamanın yapılandırmasını AWS SSM kullanacak şekilde güncelleyin:

```bash
# .env dosyasında
SECRET_PROVIDER=aws_ssm
SSM_PREFIX=/onlyvips
AWS_REGION=eu-west-1  # Bölgenizi belirtin
```

3. AWS kimlik bilgilerini IAM rol veya ortam değişkenleri ile sağlayın.

### 3. Vercel için Secret Yönetimi

Frontend projelerimiz için, `.env` dosyaları yerine Vercel'in dahili secret yönetimini kullanın:

```bash
# Vercel CLI ile secret ekle
vercel secrets add JWT_SECRET secure-jwt-secret

# Vercel projesinde secret'ı kullanma
vercel env add VITE_API_URL production
```

Vercel Dashboard'dan da secret'ları ekleyebilir ve düzenleyebilirsiniz.

### Üretim Ortamında Secret Ekleme Adımları

1. **Yeni bir secret eklerken:**

   a. Önce secret'ı güvenli depolama sistemine ekleyin (Vault veya AWS SSM)
   b. CI/CD pipeline'ında gerekli environment variable'ı tanımlayın
   c. Kod tabanında referansı ekleyin

2. **AWS SSM'ye yeni bir secret ekleme:**

```bash
aws ssm put-parameter \
    --name "/onlyvips/NEW_SECRET" \
    --value "new-secret-value" \
    --type "SecureString" \
    --description "New secret for OnlyVips"
```

3. **Vault'a yeni bir secret ekleme:**

```bash
vault kv patch secret/onlyvips NEW_SECRET="new-secret-value"
```

4. **GitHub Actions'a secret ekleme:**

   GitHub repository > Settings > Secrets > Actions > New repository secret

   ```
   Name: NEW_SECRET
   Value: new-secret-value
   ```

## 🔄 CI/CD

CI/CD pipeline'ı GitHub Actions ile yönetilir ve aşağıdaki aşamaları içerir:

- Linting ve test
- E2E testleri (Playwright)
- Build ve dağıtım
- Docker image oluşturma

Daha fazla bilgi için [CI/CD Dokümantasyonu](.github/README-CI-CD.md) bölümüne bakın.

## 📄 Lisans

Bu proje [MIT lisansı](LICENSE) altında lisanslanmıştır.

---

© 2024 SiyahKare. Tüm hakları saklıdır.
